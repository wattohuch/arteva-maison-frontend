<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Track your order - ARTEVA Maison">
    <title data-i18n="track_your_order">Order Tracking | ARTEVA Maison</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Leaflet CSS for map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/main.css">
    <!-- Flag Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons@7.2.3/css/flag-icons.min.css">

    <style>
        .tracking-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-8) var(--space-4);
            margin-top: var(--header-height);
        }

        .tracking-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }

        .tracking-header h1 {
            font-family: var(--font-display);
            font-size: var(--fs-3xl);
            margin-bottom: var(--space-3);
        }

        /* Order lookup form */
        .order-lookup {
            max-width: 500px;
            margin: 0 auto var(--space-8);
            display: flex;
            gap: var(--space-3);
        }

        .order-lookup input {
            flex: 1;
            padding: var(--space-3) var(--space-4);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-size: var(--fs-base);
        }

        .order-lookup input:focus {
            outline: none;
            border-color: var(--color-gold);
        }

        .order-lookup button {
            padding: var(--space-3) var(--space-6);
            background: var(--color-gold);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-body);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .order-lookup button:hover {
            background: var(--color-gold-dark);
        }

        /* Tracking content grid */
        .tracking-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-6);
        }

        @media (max-width: 768px) {
            .tracking-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Status timeline */
        .status-section {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
        }

        .status-section h2 {
            font-family: var(--font-display);
            font-size: var(--fs-xl);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .current-status {
            background: linear-gradient(135deg, var(--color-gold), var(--color-gold-dark));
            color: white;
            padding: var(--space-4);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-6);
            text-align: center;
        }

        .current-status-label {
            font-size: var(--fs-sm);
            opacity: 0.9;
            margin-bottom: var(--space-1);
        }

        .current-status-value {
            font-size: var(--fs-lg);
            font-weight: 600;
            text-transform: capitalize;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: var(--space-8);
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-light);
        }

        .timeline-item {
            position: relative;
            padding-bottom: var(--space-4);
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-dot {
            position: absolute;
            left: -30px;
            top: 2px;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 2px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timeline-item.completed .timeline-dot {
            background: var(--color-gold);
            border-color: var(--color-gold);
        }

        .timeline-item.completed .timeline-dot svg {
            stroke: white;
        }

        .timeline-item.active .timeline-dot {
            background: var(--color-gold);
            border-color: var(--color-gold);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4);
            }

            50% {
                box-shadow: 0 0 0 10px rgba(212, 175, 55, 0);
            }
        }

        .timeline-content h4 {
            font-weight: 500;
            margin-bottom: var(--space-1);
        }

        .timeline-content p {
            font-size: var(--fs-sm);
            color: var(--text-muted);
        }

        /* Map section */
        .map-section {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .map-header {
            padding: var(--space-4) var(--space-6);
            border-bottom: 1px solid var(--border-light);
        }

        .map-header h2 {
            font-family: var(--font-display);
            font-size: var(--fs-xl);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        #tracking-map {
            height: 500px;
            width: 100%;
        }

        @media (max-width: 768px) {
            #tracking-map {
                height: 400px;
            }
        }

        .map-info {
            padding: var(--space-4) var(--space-6);
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-3);
        }

        .pilot-info {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .pilot-avatar {
            width: 40px;
            height: 40px;
            background: var(--color-gold);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .pilot-details h4 {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .pilot-details p {
            font-size: var(--fs-sm);
            color: var(--text-muted);
        }

        .location-update {
            font-size: var(--fs-sm);
            color: var(--text-muted);
        }

        /* No order state */
        .no-order {
            text-align: center;
            padding: var(--space-12) var(--space-4);
        }

        .no-order-icon {
            width: 80px;
            height: 80px;
            background: var(--bg-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-4);
        }

        .no-order-icon svg {
            width: 40px;
            height: 40px;
            stroke: var(--text-muted);
        }

        .no-order h2 {
            font-family: var(--font-display);
            margin-bottom: var(--space-2);
        }

        .no-order p {
            color: var(--text-muted);
        }

        /* Loading state */
        .loading {
            text-align: center;
            padding: var(--space-8);
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-light);
            border-top-color: var(--color-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-4);
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Real-time indicator */
        .realtime-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            font-size: var(--fs-xs);
            font-weight: 500;
        }

        .realtime-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        /* Pulse animation for driver marker */
        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            }

            50% {
                transform: scale(1.1);
                box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
            }
        }

        /* Smooth transitions for location updates */
        .pilot-marker {
            transition: transform 0.3s ease;
        }

        .map-info {
            transition: all 0.3s ease;
        }

        /* Utility */
        .hidden {
            display: none !important;
        }
    </style>
    <link rel="icon" type="image/png" href="assets/images/favicon.png">
</head>

<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header-container">
            <div class="header-left">
                <a href="index.html" class="logo">ARTÃ‰VA</a>
            </div>
            <div class="header-actions">
                <a href="cart.html" class="header-icon" id="cart-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <path d="M16 10a4 4 0 01-8 0"></path>
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="tracking-container">
        <div class="tracking-header">
            <h1 data-i18n="track_your_order">Track Your Order</h1>
            <p data-i18n="track_order_desc">Enter your order number to see real-time delivery status</p>
        </div>

        <!-- Order Lookup -->
        <form class="order-lookup" id="orderLookupForm">
            <input type="text" id="orderNumberInput" placeholder="Enter order number (e.g., ART-000001)"
                pattern="ART-\d{6}" title="Order number format: ART-XXXXXX" data-i18n-placeholder="search_placeholder">
            <button type="submit" data-i18n="track_btn">Track</button>
        </form>

        <!-- Loading State -->
        <div class="loading hidden" id="loadingState">
            <div class="spinner"></div>
            <p data-i18n="loading_tracking">Loading order details...</p>
        </div>

        <!-- No Order State -->
        <div class="no-order hidden" id="noOrderState">
            <div class="no-order-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke-width="1.5">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>
            <h2 data-i18n="no_order_found">No Order Found</h2>
            <p id="noOrderMessage" data-i18n="no_order_msg">Please enter a valid order number to track your delivery.
            </p>
        </div>

        <!-- Tracking Content -->
        <div class="tracking-grid hidden" id="trackingContent">
            <!-- Status Timeline -->
            <div class="status-section">
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span data-i18n="order_status_title">Order Status</span>
                    <span class="realtime-badge" data-i18n="live_status">Live</span>
                </h2>

                <div class="current-status">
                    <div class="current-status-label" data-i18n="current_status_label">Current Status</div>
                    <div class="current-status-value" id="currentStatus">Loading...</div>
                </div>

                <div class="timeline" id="statusTimeline">
                    <!-- Timeline items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Map Section -->
            <div class="map-section">
                <div class="map-header">
                    <h2>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <span data-i18n="live_tracking">Live Tracking</span>
                    </h2>
                </div>
                <div id="tracking-map"></div>
                <div class="map-info" id="mapInfo">
                    <div class="pilot-info" id="pilotInfo">
                        <div class="pilot-avatar" id="pilotAvatar">?</div>
                        <div class="pilot-details">
                            <h4 id="pilotName" data-i18n="no_pilot">No pilot assigned</h4>
                            <p id="pilotPhone" data-i18n="waiting_assignment">Waiting for assignment...</p>
                        </div>
                    </div>
                    <div class="location-update" id="locationUpdate" data-i18n="location_updates">
                        Location updates will appear here
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer with Currency Selector (Mobile Only) -->
    <footer style="background: #1a1a1a; padding: 20px; text-align: center; margin-top: 40px;">
        <div class="footer-currency-selector">
            <div class="currency-selector">
                <button class="currency-trigger" aria-label="Select Currency">
                    <span class="currency-flag fi fi-kw"></span>
                    <span class="currency-code">KWD</span>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 16px; height: 16px;">
                        <path d="M18 15l-6-6-6 6" />
                    </svg>
                </button>
                <div class="currency-dropdown">
                    <div class="currency-option active" data-currency="KWD">
                        <span class="currency-option-flag fi fi-kw"></span>
                        <div>
                            <div class="currency-option-code">KWD</div>
                            <div class="currency-option-name">Kuwaiti Dinar</div>
                        </div>
                    </div>
                    <div class="currency-option" data-currency="SAR">
                        <span class="currency-option-flag fi fi-sa"></span>
                        <div>
                            <div class="currency-option-code">SAR</div>
                            <div class="currency-option-name">Saudi Riyal</div>
                        </div>
                    </div>
                    <div class="currency-option" data-currency="AED">
                        <span class="currency-option-flag fi fi-ae"></span>
                        <div>
                            <div class="currency-option-code">AED</div>
                            <div class="currency-option-name">UAE Dirham</div>
                        </div>
                    </div>
                    <div class="currency-option" data-currency="QAR">
                        <span class="currency-option-flag fi fi-qa"></span>
                        <div>
                            <div class="currency-option-code">QAR</div>
                            <div class="currency-option-name">Qatari Riyal</div>
                        </div>
                    </div>
                    <div class="currency-option" data-currency="BHD">
                        <span class="currency-option-flag fi fi-bh"></span>
                        <div>
                            <div class="currency-option-code">BHD</div>
                            <div class="currency-option-name">Bahraini Dinar</div>
                        </div>
                    </div>
                    <div class="currency-option" data-currency="OMR">
                        <span class="currency-option-flag fi fi-om"></span>
                        <div>
                            <div class="currency-option-code">OMR</div>
                            <div class="currency-option-name">Omani Rial</div>
                        </div>
                    </div>
                <div class="currency-option" data-currency="USD">
                  <span class="currency-option-flag fi fi-us"></span>
                  <div>
                    <div class="currency-option-code">USD</div>
                    <div class="currency-option-name">US Dollar</div>
                  </div>
                </div>
                            <div class="currency-option" data-currency="USD">
                                <span class="currency-option-flag fi fi-us" aria-label="USA"></span>
                                <div class="currency-option-info">
                                    <div class="currency-option-code" style="display: none;">USD</div>
                                    <div class="currency-option-name">US Dollar</div>
                                </div>
                            </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Leaflet JS for map -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Socket.IO client -->
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>

    <!-- i18n script -->
    <script src="assets/js/i18n.js"></script>

    <!-- API helper -->
    <script src="assets/js/config.js"></script>
    <script src="assets/js/api.js"></script>
    <script src="assets/js/currency.js"></script>

    <!-- Tracking logic -->
    <script src="assets/js/tracking.js?v=2"></script>
</body>

</html>